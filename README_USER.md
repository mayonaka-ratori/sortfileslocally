# LocalCurator Prime 取扱説明書

LocalCurator Primeは、AI（CLIPおよびInsightFace）を活用して、PC内の大量の画像や動画を自動で整理、検索、クリーンアップするためのデスクトップ・メディア管理ツールです。

---

## 1. 起動方法

ターミナル（PowerShell等）を開き、プロジェクトフォルダに移動して以下のコマンドを実行してください。

```powershell
streamlit run app.py
```

ブラウザが自動的に開き、アプリケーション画面が表示されます。

---

## 2. 基本操作フロー

### ステップ1：スキャン
1. 左側のサイドバーにある **「Target Folder Path」** に、整理したい画像・動画が入っているフォルダのパスを入力します。
2. **「Start Scanning」** ボタンをクリックします。
3. AIが各ファイルを解析し、内容（意味）や顔、メタデータをデータベースに登録します。
    * *ヒント: RTX 4070 Superの性能を活かしたバッチ処理により、高速に解析が進みます。*

### ステップ2：検索と閲覧（Gallery）
1. **View Mode** で 「Gallery」 を選択します。
2. 上部の検索バーに **「海辺を走る犬」** や **「青い服を着た女性」** など、言葉を入力してEnterを押します。
3. 文脈を理解したAIが、類似度の高い順にメディアを表示します。

---

## 3. 主要機能の紹介

### 👥 Face Clusters（人物図鑑）
* **概要:** 写真に写っている人物をAIが自動で判別し、同一人物ごとにグループ化します。
* **操作:** 「Run Face Clustering」を押すと、全写真の顔データを解析し、「Person #1」「Person #2」としてまとめます。クリックするとその人が写っている写真だけが表示されます。

### 🧹 Cleaner（重複クリーナー）
* **概要:** 内容が似ている画像や動画を検出し、不要な方を削除してディスク容量を節約します。
* **特徴:** 
    * 似た構図の連写や、解像度・ファイルサイズが異なる重複ファイルを検出。
    * **スマート提案:** 解像度が高い方を自動的に「残す方」として推奨します。
    * **ビデオ対応:** 同じシーンかつ「動画の長さ」が近いものだけを正確に抽出します。
* **操作:** 「Scan for Duplicates」を実行し、推奨アクションを確認して「Keep」を選択します。削除されたファイルは `.trash` フォルダへ移動されます。

### 🗂️ Auto Organizer（自動整理機能）
このプロジェクトの核心機能です。
1. **Custom Learning（AIへの教育）**:
    * 「Landscape」「Portrait」など、自分が仕分けたい名前のフォルダを作り、数枚のサンプル画像を入れます。
    * 「Train Classifier」を実行すると、AIがあなたの好みの分類基準を学習します。
2. **Physical Sorter（物理移動）**:
    * 学習したAIカテゴリや、撮影日（年）、ファイル形式に基づいて、実際にファイルを物理的にフォルダ分けします。
    * **安全性:** 「Dry Run」でシミュレーション、「Copy」で複製、「Move」で移動を選択できます。
    * **Undo機能:** 処理後に生成される `undo_...bat` ファイルを実行すれば、いつでも整理前の状態に戻せます。

---

## 4. プロフェッショナルな使い方のコツ

* **タグの自動付与:** スキャン時にAIが「ポートレート」「スクリーンショット」「アニメ」などのタグを自動推論しています。これらも検索の助けになります。
* **高性能GPU:** NVIDIA GPU (RTX 4070 Super) を搭載した環境であれば、数千枚のメディアも数分で整理可能です。

---

## 5. 注意事項

* すべての処理は**ローカルPC内**で完結しており、外部サーバーにデータが送信されることはありません。
* 物理移動（Move）を行う際は、必ずバックアップを取るか、まずは「Copy」または「Dry Run」で動作を確認することを推奨します。
